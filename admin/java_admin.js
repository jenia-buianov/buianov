function count(mixed_var, mode) {  var key, cnt = 0;  if (mixed_var === null || typeof mixed_var === 'undefined') {    return 0;  } else if (mixed_var.constructor !== Array && mixed_var.constructor !== Object) {    return 1;  }  if (mode === 'COUNT_RECURSIVE') {    mode = 1;  }  if (mode != 1) {    mode = 0;  }  for (key in mixed_var) {    if (mixed_var.hasOwnProperty(key)) {      cnt++;      if (mode == 1 && mixed_var[key] && (mixed_var[key].constructor === Array || mixed_var[key].constructor ===        Object)) {        cnt += this.count(mixed_var[key], 1);      }    }  }  return cnt;}function enters(){	login = document.getElementById('text').value;	login = login.replace(/^\s\s*/, '').replace(/\s\s*$/, '');	pass = document.getElementById('pass').value;	alerts='';	if (login==''){alerts+='Логин не заполнен, ';}	if (pass==''){alerts+='Пароль не заполнен, ';}	//alert(login+' '+pass);	if (alerts!==''){alerts = alerts.substr(0,alerts.length-2); $("#alerts").html(alerts);}else{		$('#loading').css('display','block');		$.post(admin_page+"login.php", {login:login,pass:pass},function(data){		datas = data;		dt = data.split(">");		ct = count(dt)-1;		if (dt[ct]=='oks')		{			location.reload();		}		else		{			dt1 = datas.split('ok');			if (count(dt1)>1){				$('body').html(dt1[0]);			}else{$('#loading').css('display','none');$("#alerts").html(dt1[1]);}			}	} );	}		}function access(){	code = document.getElementById('code').value;	$('#loading').css('display','block');	$.post(admin_page+"access.php", {code:code},function(data){	dt = data.split(">");			ct = count(dt)-1;	if (dt[ct]=='ok'){location.reload();}else{$('#loading').css('display','none');alert(data);}} );}function trm(row){	i=0;	while(i<count(row))	{		str = $("#"+row[i]).val();		str = str.replace(/^\s\s*/, '').replace(/\s\s*$/, '');		$("#"+row[i]).val(str);			i++;	}}function content(lnk){	 window.location.replace(admin_page+lnk);}function clear_row(row){		i=0;	while(i<count(row))	{		$('#'+row[i]).val('');		i++;	}}function lang(){	vl = $('#lang').val();	$.post(admin_page+"lang.php", {vl:vl},function(data){					dt = data.split(">");		ct = count(dt)-1;			if (dt[ct]=='ok'){				window.location.reload(true);			}else{				alert(data);}		} );}function deletes(type,id,page){	$.post(admin_page+"delete.php", {type:type,id:id},function(data){			if (data=='ok'){				content(page);			}else{				alert(data);}		} );}function order(id,ord){	$.post(admin_page+"order.php", {id:id,ord:ord},function(data){			if (data=='ok'){				content('settings/left');			}else{				$('#alerts').html(data);}		} );}function view_chat(time){	var timerId = setTimeout(function tick() {		//alert(send_id);  $.post(admin_page+"view_chats.php", {mid:document.getElementById('send_id').value},function(data){	$('#active_chats').html(data);	} );	if (document.getElementById('send_id').value!=='')	{				$.post(admin_page+"chat_w.php", {mid:document.getElementById('send_id').value},function(data){						dt = $('#chat').html().split('<()>');			if (dt[0]!==document.getElementById('send_id').value) {				dr = data.split('<()>');				$('#chat').html(dr[1]);}			else			{				if (count($('#chat').html().split('chat-message'))!==count(data.split('chat-message'))) {					dr = data.split('<()>');				$('#chat').html(dr[1]);				}			}		} );	}				 timerId = setTimeout(tick, time);}, time)}function search_chat(){	$("#loading2").css("display","block");	row = ['ss'];	trm(row);	 $.post(admin_page+"search_chat.php", {s:document.getElementById('ss').value},function(data){	 $('#users').html(data);	 });}function backup(id){	$('#loading').css('display','block');	$.post(admin_page+"unzip.php", {id:id},function(data){	 $('#loading').css('display','block');	 if (data!=='')alert(data);	 content('home');	 });}function update(){	$('.st1').css('display','block');	$.post(admin_page+"update.php", {s:''},function(data){	 $('.static-back').html(data);	 });}function add_backup(){	$('.st1').css('display','block');	$.post(admin_page+"create_bakup.php", {s:''},function(data){	 $('.static-back').html(data);	 });}function runScript(e) {	art = e.keyCode;	if (art == 13) {		row = ['message'];		trm(row);	if (document.getElementById('message').value!==''&&document.getElementById('send_id').value!==''){			$.post(admin_page+"send_chat.php", {mid:document.getElementById('send_id').value,message:document.getElementById('message').value},function(data){				if (data!=='ok'){ alert(data);}else{document.getElementById('message').value='';}			});		}    }}function send_message(){		$('#loading').css('display','block');	subj = document.getElementById('subject').value;	if (subj=='other'||subj=='order') {subj = document.getElementById('tema').value;}		from_ = document.getElementById('from').value;	if (from_==1) {phone = document.getElementById('phone').value;}else{phone = '';}		alerts='';	if (subj=='') alerts+='Subject is empty, ';	if (phone==''&&from_==1) alerts+='Phone number is empty, ';		text = document.getElementsByClassName('note-editable');	text = text[0].innerHTML;	if (text=='') alerts+='Text is empty, ';		if (alerts!=='') {			$('#loading').css('display','none');			var params = {                life: 10000,                theme: "ruby",                sticky: false,                horizontalEdge: "top",                verticalEdge: "right",				icon: 'info-circled',				heading: 'Sending message',				height: 200            },            text = alerts.substr(0,alerts.length-2);			$.notific8(text, params);						}	else	{			$.post(admin_page+"send_message.php", {phone:phone,from_:from_,text:text,subj:subj},function(data){			dt = data.split(">");			ct = count(dt)-1;			$('#loading').css('display','none');			if (dt[ct]=='ok'){				var params = {                life: 10000,                theme: "lime",                sticky: false,                horizontalEdge: "top",                verticalEdge: "right",				icon: 'info-circled',				heading: 'Sending message',				height: 200            },            text = 'Message sent';			$.notific8(text, params);			}else{				var params = {                life: 10000,                theme: "ruby",                sticky: false,                horizontalEdge: "top",                verticalEdge: "right",				icon: 'info-circled',				heading: 'Sending message',				height: 200            },            text = dt[0];			$.notific8(text, params);			}		} );	}	}function from_message(){	fr = document.getElementById('from').value;	if (fr==1) {document.getElementById('contacts').innerHTML = '<input type="text" class="form-control" style="display:inline-block;width:100%;" placeholder="Phone number" id="phone">';} else{document.getElementById('contacts').innerHTML = '';}}function subject(){	tem = document.getElementById('subject').value;	if (tem==''||tem=='error') {document.getElementById('res').innerHTML = '';}	if (tem=='order') {document.getElementById('res').innerHTML = '<select id="tema" class="form-control"><option value="site">Site</option><option value="application">Application</option><option value="music">Music</option><option value="graphica">Graphic</option><option value="video">Video</option></select>';}	if (tem=='other') {document.getElementById('res').innerHTML = '<input type="text" id="tema" class="form-control" placeholder="Subject" style="width:100%;">';}	}function change_pass(){	opass = document.getElementById('opass').value;	pass1 = document.getElementById('pass').value;	pass2 = document.getElementById('pass2').value;	alerts = '';	if (opass=='') {alerts+='Старый пароль не заполнен, ';}	if (pass1=='') {alerts+='Новый пароль не заполнен, ';}	if (pass2=='') {alerts+='Повторный пароль не заполнен, ';}	if (pass1!==''&&pass2!=='')	{		if (pass1!==pass2)		{			alerts+='Пароли не совпадают, ';		}	}	if (alerts=='')	{			$.post(admin_page+"change.php", {opass:opass,pass:pass1},function(data){			dt = data.split(">");			ct = count(dt)-1;			if (dt[ct]=='ok'){				content('settings');			}else{				$('#alerts').html(dt[0]);}		} );			}	else{alerts = alerts.substr(0,alerts.length-2); $("#alerts").html(alerts);}}function security(){	tts = (document.getElementById('tts2').value).split(',');		$('#loading').css('display','block');		$.post(admin_page+"send_security.php", {a:''},function(data){			$('#loading').css('display','none');			dt = data.split(">");			ct = count(dt)-1;			if (dt[ct]=='ok')			{				//alert(tts[count(elements)+1]);				var params = {                life: 10000,                theme: "lime",                sticky: false,                horizontalEdge: "top",                verticalEdge: "right",				icon: 'info-circled',				heading: tts[0],				height: 200            },            text = tts[1];			$.notific8(text, params);			}			else			{				//alert(tts[count(elements)+1]);				//alert(tts[count(tts)-1]);				var params = {                life: 10000,                theme: "ruby",                sticky: false,                horizontalEdge: "top",                verticalEdge: "right",				icon: 'info-circled',				heading: tts[0],				height: 200            },            text = tts[2]+':<br>'+data;			$.notific8(text, params);			$('.jquery-notific8-notification').css('height','300px');			//alert(data);			//$('.jquery-notific8-notification').css('width','300px');			}		});	}function main(where,type){	if (type=='edit')	{		urls = window.location.toString();		urls = urls.split('/');		urls = urls[count(urls)-1];		}else{ urls = '';}		elements = (document.getElementById('elements').value).split(',');	lng = (document.getElementById('add_to_lng').value).split(',');	amds = document.getElementById('adms').value;	tts = (document.getElementById('tts').value).split(',');	k=0; alerts = ''; values = '';	lng_count = count(lng);	//alert('1');	trm(elements);	if (count(lng)>1) trm(lng); else lng_count=0;	//alert(lng_count);		while(k<count(elements))	{		//alert(elements[k]+' '+$('#'+elements[k]).val());		if ($('#'+elements[k]).val()==''){alerts+=', '+tts[k];}else{values+=','+$('#'+elements[k]).val();}		k++;	}	k=0; lg = '';	while(k<lng_count)	{		//alert(elements[k]+' '+$('#'+elements[k]).val());		if ($('#'+lng[k]).val()==''){alerts+=', '+tts[k+count(elements)];}else{lg+='(?)'+$('#'+lng[k]).val();}		k++;	}	//alert('2');	k = lng_count+count(elements);	classes = (document.getElementById('classes').value).split(',');	cls_count = count(classes);	if (count(classes)==1) cls_count=0;	v=0; cls = '';		while(v<cls_count)	{		m=0;		a = document.getElementsByClassName(classes[v]);		while(m<a.length)		{			cls+='(?)'+a[m].innerHTML;			m++;		}		v++;	}	values = values.substr(1,values.length);	if (lng_count>0) lg = lg.substr(3,lg.length);	if (cls_count>0) cls = cls.substr(3,cls.length);	if (alerts!=='')	{				alerts = alerts.substr(2,alerts.length)+' '+tts[count(tts)-4];		var params = {                life: 10000,                theme: "ruby",                sticky: false,                horizontalEdge: "top",                verticalEdge: "right",				icon: '',				heading: '',				height: 200            },            text = alerts;                   $.notific8(text, params);			}	else	{		$('#loading').css('display','block');		$.post(admin_page+type+".php", {adms:amds,id:urls,module:where,values:values,cls:cls,lng:lg,rows:document.getElementById('rows').value,icon:document.getElementById('icon').value},function(data){			$('#loading').css('display','none');			if (data=='ok')			{				//alert(tts[count(elements)+1]);				var params = {                life: 10000,                theme: "lime",                sticky: false,                horizontalEdge: "top",                verticalEdge: "right",				icon: 'info-circled',				heading: tts[count(tts)-3],				height: 200            },            text = tts[count(tts)-2];			$.notific8(text, params);			}			else			{				//alert(tts[count(elements)+1]);				//alert(tts[count(tts)-1]);				var params = {                life: 10000,                theme: "ruby",                sticky: false,                horizontalEdge: "top",                verticalEdge: "right",				icon: 'info-circled',				heading: tts[count(tts)-3],				height: 200            },            text = tts[count(tts)-1]+':<br>'+data;			$.notific8(text, params);			$('.jquery-notific8-notification').css('height','300px');			alert(data);			//$('.jquery-notific8-notification').css('width','300px');			}		});	}}